<p class="text-brecum">{{vm.String}}</p>
<form class="form-horizontal row" role="form">
	<div class="form-body">
		<div class="portlet light bordered">
			<div class="portlet-title background-title">
				<div class="caption">
					<span class="caption-subject bold lowercase" translate>Thông
						tin tìm kiếm </span>

				</div>
				<div class="text-right margin-row-title">
					<i data-toggle="collapse" data-target="#demoapp"
						class="fa fa-chevron-circle-up" aria-hidden="true"></i>
				</div>
			</div>
			<div id="demoapp" class="collapse in from-search"
				style="position: relative">

				<i data-toggle="dropdown"
					class="tooltip1  tooltipshow_search_advance" aria-expanded="false">
					<button style="overflow: hidden;" class="search_advance"
						ng-show="vm.iconDiss" ng-click="vm.iconDiss=!vm.iconDiss">
						<span class="tooltiptext">Mở rộng</span> <i
							class="fa fa-search-plus" aria-hidden="true"
							style="color: #e0d014"></i>
					</button>

				</i> <i data-toggle="dropdown"
					class="tooltip1 tooltiphide_search_advance" aria-expanded="false">
					<button style="overflow: hidden;" class="search_advance"
						ng-show="!vm.iconDiss" ng-click="vm.iconDiss=!vm.iconDiss">
						<span class="tooltiptext">Rút gọn</span> <i
							class="fa fa-search-minus" aria-hidden="true"
							style="color: #e0d014"></i>
					</button>
				</i>



				<div class="clearfix position-relative">
					<div class="clearfix">
						<div class="form-group col-md-6">
							<label class="col-md-4 control-label" translate>Nội dung
								tìm kiếm</label>
							<div class="col-md-8">
								<input id="keySearch" ng-enter="vm.doSearchContruction()"
									class=" form-control width100" type="text" autofocus="true"
									ng-model="vm.constructionSearch.keySearch"
									placeholder="Mã công trình/ Trạm/ Tỉnh/ Hợp đồng đầu ra " />
							</div>
						</div>
						<div class="form-group col-md-6">
							<label class="col-md-4 control-label" translate>Tỉnh</label>
							<div class="col-md-8" ng-enter="vm.doSearchContruction()">
								<div class="input-icon right ">
									<i class="fa fa-search directive"
										ng-click="vm.openCatProvincePopup()"></i>
								</div>
								<input kendo-auto-complete k-options="vm.provinceOptions"
									class=" form-control width100" type="text"
									ng-model="vm.constructionSearch.catProvince" id="province"
									name="province" />
								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.cancelInput('province')"></i>
								</div>
							</div>
						</div>


					</div>
					<div class="clearfix">
						<div class="form-group col-md-6">
							<label class="col-md-4 control-label" translate>Đơn vị
								thi công</label>
							<div class="col-md-8" ng-enter="vm.doSearchContruction()">
								<div class="input-icon right ">
									<i class="fa fa-search directive"
										ng-click="vm.openDepartmentTo('dept')"></i>
								</div>
								<input kendo-auto-complete k-options="vm.deprtOptions2"
									ng-blur="vm.changeDataAuto('dept')"
									class=" form-control width100" type="text"
									ng-model="vm.constructionSearch.sysGroupName" name="dept"
									data-required-msg="Đơn vị không để trống" /> <span
									id="msg" data-for='dvn1' class='k-invalid-msg'></span>
								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.cancelInput('deptClear')"></i>
								</div>
							</div>
						</div>
						<div class="form-group col-md-6">
							<label class="col-md-4 control-label" translate>Loại công
								trình</label>
							<div class="col-md-8" ng-enter="vm.doSearchContruction()">
								<select kendo-multi-select style="width: 100%"
									ng-model="vm.constructionSearch.listCatConstructionType"
									k-data-text-field="'name'" k-data-value-field="'id'"
									k-data-source="vm.catConstructionTypeDataList">
								</select>
								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.cancelInput('consType')"></i>
								</div>
							</div>

						</div>

					</div>
					<div class="clearfix">
						<div class="form-group col-md-6">
							<label class="col-md-4 control-label req" translate>Ngày tạo
								từ ngày</label>
							<div class="col-md-8">
								<div class="col-md-5" style="padding-left: 0px;">
									<input kendo-date-picker k-format="'dd/MM/yyyy'"
										ng-model="vm.constructionSearch.dateFrom" style="width: 100%;"
										id="dateFrom" min-year="1000" date-time />
								</div>
								<div class="col-md-2" style="text-align: center;">
									<label class="control-label req" translate>đến</label>
								</div>
								<div class="col-md-5" style="padding-right: 0px;">
									<input kendo-date-picker k-format="'dd/MM/yyyy'"
										ng-model="vm.constructionSearch.dateTo" style="width: 100%;"
										id="dateTo" min-year="1000" date-time />
								</div>
								<div class="One_icon">
								<i class="fa fa-times" aria-hidden="true"
									ng-click="vm.cancelInput('date')"></i>
							</div>
							</div>
						</div>
						<div class="form-group col-md-6" ng-show="!vm.iconDiss">
							<label class="col-md-4 form-horizontal control-label " translate>Mã
								nhà trạm</label>
							<div class="col-md-8">
								<div class="input-icon right ">
									<i class="fa fa-search directive"
										ng-click="vm.openCatStationHousePopup()"></i>
								</div>
								<input kendo-auto-complete
									k-options="vm.stationHouseCodeOptions"
									class=" form-control width100" type="text"
									id="catStationHouseCode"
									ng-model="vm.constructionSearch.catStationHouseCode"
									name="catStationHouseCode" />
								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.cancelInput('catStationHouseCode')"></i>
								</div>
							</div>
						</div>

					</div>
					<div class="clearfix" ng-show="!vm.iconDiss">
						<div class="form-group col-md-6">
							<label class="col-md-4 control-label" translate>Công
								trình vướng</label>
							<div class="col-md-8" ng-enter="vm.doSearchContruction()">
								<select kendo-drop-down-list id="typeVuong" style="width: 100%"
									name="typeVuong" ng-model="vm.constructionSearch.statuVuong"
									k-options="vm.typeVuong" required>
								</select>
								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.cancelInput('vuong')"></i>
								</div>
							</div>
						</div>
						<div class="form-group col-md-6">
							<label class="col-md-4 control-label" translate>Trạng
								thái công trình</label>
							<div class="col-md-8" ng-enter="vm.doSearchContruction()">
								<select kendo-multi-select style="width: 100%"
									ng-model="vm.constructionSearch.listStatus"
									k-data-text-field="'name'" k-data-value-field="'id'"
									k-data-source="vm.statusDataList">
								</select>
								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.cancelInput('consStatus')"></i>
								</div>
							</div>
						</div>
					</div>
					<div class="clearfix form-actions margin-top">
						<div class="row">
							<div class="col-md-12 text-center">
								<!-- <button type="button" id="find"
											class="btn green btn-outline padding-search-right"
											ng-click="vm.doSearch()" translate>Tìm kiếm</button> -->
								<button type="button" id="findParam"
									ng-click="vm.doSearchContruction()"
									class="btn btn-qlk padding-search-right searchQLK" translate>Tìm
									kiếm</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</form>
<div class="portlet light bordered">
	<div class="portlet-title background-title">
		<div class="caption">
			<span class="caption-subject bold lowercase" translate>Kết quả
				tìm kiếm: </span>&nbsp; <label class="control-label bold lowercase">{{vm.countCons}}</label>
			<label class="control-label bold lowercase">&nbsp;bản ghi</label>
		</div>
		<div class="text-right margin-row-title">
			<i data-toggle="collapse" data-target="#demoapp2"
				class="fa fa-chevron-circle-up" aria-hidden="true"></i>
		</div>
	</div>
	<div id="demoapp2" class="collapse in from-search">
		<div class="clearfix position-relative">
			<div id="constructionGrid" kendo-grid="vm.constructionGrid"
				k-editable="false" k-options="vm.gridOptions"></div>
		</div>
	</div>
	<script type="text/javascript">
		$('#appIdSearch').keypress(
				function(event) {
					$("input").change(function() {
						$(this).val($.trim($(this).val()));
					});
					document.onkeydown = keyDown;
					function keyDown(e) {
						switch (e.keyCode) {
						case 27:
							$("#cancel").click();
							break;
						case 13:
							if ($('.k-widget.k-window.fix-footer').css(
									'display') !== 'block') {
								$("#findParam").click();
							}
							break;
						}
					}
				});
	</script>